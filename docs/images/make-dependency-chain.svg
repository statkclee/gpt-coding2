<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 20 900 300">
  <defs>
    <style>
      .tufte-text {
        font-family: Palatino, 'Book Antiqua', Georgia, serif;
        fill: #333;
        font-size: 14px;
      }
      .tufte-title {
        font-family: Palatino, 'Book Antiqua', Georgia, serif;
        fill: #333;
        font-size: 16px;
        font-weight: bold;
      }
      .tufte-small {
        font-family: Palatino, 'Book Antiqua', Georgia, serif;
        fill: #666;
        font-size: 12px;
      }
      .tufte-code {
        font-family: 'Monaco', 'Courier New', monospace;
        fill: #333;
        font-size: 11px;
      }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect x="0" y="0" width="900" height="320" fill="#ffffff"/>

  <!-- Title -->
  <text x="450" y="50" class="tufte-title" text-anchor="middle">의존성 체인 (Dependency Chain)</text>

  <!-- Stage 1: Raw data -->
  <rect x="60" y="90" width="120" height="60" fill="#f5f5f5" stroke="#999" stroke-width="1.5" rx="5"/>
  <text x="120" y="118" class="tufte-code" text-anchor="middle">raw.csv</text>
  <text x="120" y="138" class="tufte-small" text-anchor="middle" fill="#999">원시 데이터</text>

  <!-- Arrow 1 -->
  <path d="M 180 120 L 230 120" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <text x="205" y="110" class="tufte-small" text-anchor="middle" fill="#999">preprocess</text>

  <!-- Stage 2: Clean data -->
  <rect x="240" y="90" width="120" height="60" fill="#e8e8e8" stroke="#666" stroke-width="1.5" rx="5"/>
  <text x="300" y="118" class="tufte-code" text-anchor="middle">clean.csv</text>
  <text x="300" y="138" class="tufte-small" text-anchor="middle" fill="#999">정제 데이터</text>

  <!-- Arrow 2 -->
  <path d="M 360 120 L 410 120" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <text x="385" y="110" class="tufte-small" text-anchor="middle" fill="#999">analyze</text>

  <!-- Stage 3: Stats -->
  <rect x="420" y="90" width="120" height="60" fill="#ddd" stroke="#666" stroke-width="1.5" rx="5"/>
  <text x="480" y="118" class="tufte-code" text-anchor="middle">stats.csv</text>
  <text x="480" y="138" class="tufte-small" text-anchor="middle" fill="#999">통계 결과</text>

  <!-- Arrow 3 -->
  <path d="M 540 120 L 590 120" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <text x="565" y="110" class="tufte-small" text-anchor="middle" fill="#999">visualize</text>

  <!-- Stage 4: Figure -->
  <rect x="600" y="90" width="120" height="60" fill="#ccc" stroke="#333" stroke-width="2" rx="5"/>
  <text x="660" y="118" class="tufte-code" text-anchor="middle">figure.png</text>
  <text x="660" y="138" class="tufte-small" text-anchor="middle" fill="#666">최종 그래프</text>

  <!-- Scripts (bottom row) -->
  <rect x="140" y="180" width="100" height="40" fill="#fafafa" stroke="#999" stroke-width="1" stroke-dasharray="3,2" rx="3"/>
  <text x="190" y="205" class="tufte-code" text-anchor="middle">preprocess.py</text>

  <rect x="320" y="180" width="100" height="40" fill="#fafafa" stroke="#999" stroke-width="1" stroke-dasharray="3,2" rx="3"/>
  <text x="370" y="205" class="tufte-code" text-anchor="middle">analyze.py</text>

  <rect x="500" y="180" width="100" height="40" fill="#fafafa" stroke="#999" stroke-width="1" stroke-dasharray="3,2" rx="3"/>
  <text x="550" y="205" class="tufte-code" text-anchor="middle">visualize.py</text>

  <!-- Script arrows -->
  <path d="M 190 180 L 270 150" stroke="#999" stroke-width="1" fill="none" marker-end="url(#arrow)"/>
  <path d="M 370 180 L 450 150" stroke="#999" stroke-width="1" fill="none" marker-end="url(#arrow)"/>
  <path d="M 550 180 L 630 150" stroke="#999" stroke-width="1" fill="none" marker-end="url(#arrow)"/>

  <!-- Bottom explanation -->
  <rect x="60" y="245" width="660" height="55" fill="#fafafa" stroke="#999" stroke-width="1" rx="5"/>
  <text x="390" y="268" class="tufte-text" text-anchor="middle">raw.csv 수정 → 전체 체인 재빌드</text>
  <text x="390" y="288" class="tufte-small" text-anchor="middle" fill="#666">visualize.py 수정 → figure.png만 재빌드 (증분 빌드)</text>

  <!-- Legend -->
  <rect x="740" y="90" width="120" height="130" fill="#fafafa" stroke="#999" stroke-width="1" rx="5"/>
  <text x="800" y="115" class="tufte-small" text-anchor="middle" font-weight="bold">범례</text>

  <rect x="755" y="130" width="20" height="15" fill="#f5f5f5" stroke="#999" stroke-width="1"/>
  <text x="785" y="142" class="tufte-small">입력 데이터</text>

  <rect x="755" y="155" width="20" height="15" fill="#ddd" stroke="#666" stroke-width="1"/>
  <text x="785" y="167" class="tufte-small">중간 결과</text>

  <rect x="755" y="180" width="20" height="15" fill="#ccc" stroke="#333" stroke-width="2"/>
  <text x="785" y="192" class="tufte-small">최종 출력</text>

</svg>
